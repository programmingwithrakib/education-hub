
### **Declarative Pipeline ржХрзА**

**Declarative Pipeline** рж╣рж▓рзЛ Jenkins-ржПрж░ ржЖржзрзБржирж┐ржХ ржУ рж╕ржмржЪрзЗрзЯрзЗ ржЬржиржкрзНрж░рж┐рзЯ pipeline formatред  
ржПржЯрж┐ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ **Scripted Pipeline**-ржПрж░ ржЬржЯрж┐рж▓рждрж╛ ржХржорж╛ржирзЛрж░ ржЬржирзНржпред

ржПржЦрж╛ржирзЗ ржкрзБрж░рзЛ pipeline ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ **structure ржмрж╛ syntax** ржЕржирзБрж╕рж╛рж░рзЗ рж▓рзЗржЦрж╛ рж╣рзЯ,  
ржпрж╛ ржжрзЗржЦрждрзЗ ржЕржирзЗржХржЯрж╛ **YAML ржмрж╛ JSON** ржПрж░ ржорждрзЛ тАФ readable, clean ржПржмржВ рж╕рж╣ржЬрзЗ maintain ржХрж░рж╛ ржпрж╛рзЯред

рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрж▓рждрзЗ ржЧрзЗрж▓рзЗ ЁЯСЗ

> **Declarative Pipeline** ржПржоржи ржПржХржЯрж┐ structure-based format, ржпрзЗржЦрж╛ржирзЗ developer рж╕рж╣ржЬ syntax ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ  
> build, test, ржПржмржВ deploy ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ define ржХрж░рждрзЗ ржкрж╛рж░рзЗ, scripting ржирж╛ ржЬрзЗржирзЗржУред

---

### **Declarative Pipeline-ржПрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп (Key Characteristics)**

1. **Structured Syntax** тАУ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ format (`pipeline {}`, `stages {}`, `steps {}`) ржП рж▓рзЗржЦрж╛ рж╣рзЯред
    
2. **Easier to Read** тАУ Scripted Pipeline-ржПрж░ рждрзБрж▓ржирж╛рзЯ ржЕржирзЗржХ рж╕рж╣ржЬ ржУ readableред
    
3. **Built-in Error Handling** тАУ ржХрзЛржирзЛ stage fail ржХрж░рж▓рзЗ Jenkins ржирж┐ржЬрзЗржЗ handle ржХрж░рзЗред
    
4. **Simplified Flow Control** тАУ рж╕рж╣ржЬрзЗржЗ parallel stages, agent selection, environment variable define ржХрж░рж╛ ржпрж╛рзЯред
    
5. **Best for Teams** тАУ ржмрзЬ ржЯрж┐ржорзЗ standardization ржмржЬрж╛рзЯ рж░рж╛ржЦрзЗ ржПржмржВ рж╢рзЗржЦрж╛ рж╕рж╣ржЬред
    

---

### **Declarative Pipeline-ржПрж░ Structure**

ржПржХржЯрж┐ Declarative Pipeline рж╕рж╛ржзрж╛рж░ржгржд ржирж┐ржЪрзЗрж░ ржорждрзЛ structure ржЕржирзБрж╕рж░ржг ржХрж░рзЗ ЁЯСЗ

```groovy
pipeline {
    agent any        // ржХрзЛржерж╛рзЯ pipeline run рж╣ржмрзЗ (any, docker, label)

    environment {
        NODE_ENV = 'production'    // Environment variable
    }

    stages {
        stage('Build') {
            steps {
                echo 'Building the project...'
                sh 'npm install'
            }
        }

        stage('Test') {
            steps {
                echo 'Running tests...'
                sh 'npm test'
            }
        }

        stage('Deploy') {
            steps {
                echo 'Deploying application...'
                sh './deploy.sh'
            }
        }
    }

    post {
        success {
            echo 'тЬЕ Pipeline executed successfully!'
        }
        failure {
            echo 'тЭМ Pipeline failed!'
        }
    }
}
```

---

### **Structure ржмрзНржпрж╛ржЦрзНржпрж╛**

|ржЕржВрж╢|ржХрж╛ржЬ|
|---|---|
|**pipeline {}**|ржорзВрж▓ ржмрзНрж▓ржХ тАФ ржкрзБрж░рзЛ declarative pipeline ржПржЦрж╛ржирзЗ рж▓рзЗржЦрж╛ рж╣рзЯред|
|**agent**|ржХрзЛржерж╛рзЯ pipeline ржЪрж▓ржмрзЗ (server, docker container, node)ред|
|**environment**|Environment variable define ржХрж░рж╛рж░ ржЬрж╛рзЯржЧрж╛ред|
|**stages**|ржПржХрж╛ржзрж┐ржХ stage define ржХрж░рж╛рж░ container blockред|
|**stage {}**|ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХрж╛ржЬрзЗрж░ ржзрж╛ржк (Build, Test, Deploy)ред|
|**steps {}**|ржкрзНрж░рждрж┐ржЯрж┐ stage-ржПрж░ ржоржзрзНржпрзЗ command ржмрж╛ shell scriptред|
|**post {}**|Pipeline рж╢рзЗрж╖ рж╣рж▓рзЗ success ржмрж╛ failure ржЕржирзБржпрж╛рзЯрзА actionред|

---

### **Example: Multi-Stage Declarative Pipeline**

ржирж┐ржЪрзЗ ржПржХржЯрж┐ ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг ржжрзЗржУрзЯрж╛ рж╣рж▓рзЛ, ржпрзЗржЦрж╛ржирзЗ ржПржХрж╛ржзрж┐ржХ stage ржпрзБржХрзНржд ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ЁЯСЗ

```groovy
pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git branch: 'main', url: 'https://github.com/example/project.git'
            }
        }

        stage('Build') {
            steps {
                sh 'npm ci'
                sh 'npm run build'
            }
        }

        stage('Test') {
            steps {
                sh 'npm test'
            }
        }

        stage('Deploy') {
            when {
                branch 'main'
            }
            steps {
                sh './deploy-prod.sh'
            }
        }
    }

    post {
        always {
            echo 'ЁЯз╛ Pipeline run complete.'
        }
        success {
            echo 'тЬЕ Deployment successful!'
        }
        failure {
            echo 'тЭМ Deployment failed!'
        }
    }
}
```

ЁЯСЙ ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ,

- `when { branch 'main' }` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ condition ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗржи deploy stage рж╢рзБржзрзБржорж╛рждрзНрж░ main branch-ржП run рж╣рзЯред
    
- `post {}` ржмрзНрж▓ржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ success ржУ failure-ржПрж░ ржЬржирзНржп custom message рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред
    

---

### **Declarative Pipeline-ржПрж░ рж╕рзБржмрж┐ржзрж╛ (Advantages)**

|рж╕рзБржмрж┐ржзрж╛|ржмрзНржпрж╛ржЦрзНржпрж╛|
|---|---|
|**Simple & Readable**|Structured syntax рж╣ржУрзЯрж╛рзЯ рж╕рж╣ржЬрзЗ ржкрзЬрж╛ ржУ рж▓рзЗржЦрж╛ ржпрж╛рзЯред|
|**Less Error-Prone**|Built-in validation ржУ syntax check ржЖржЫрзЗред|
|**Team Friendly**|ржмрзЬ ржЯрж┐ржорзЗ ржПржХржЗ format ржЕржирзБрж╕рж░ржг ржХрж░рж╛ ржпрж╛рзЯред|
|**Built-in Error Handling**|Stage fail рж╣рж▓рзЗ Jenkins ржирж┐ржЬрзЗржЗ pipeline ржерж╛ржорж╛рзЯред|
|**Easier Maintenance**|ржПржХржмрж╛рж░ structure ржарж┐ржХ ржХрж░рзЗ ржжрж┐рж▓рзЗ future update ржХрж░рж╛ рж╕рж╣ржЬред|

---

### **Declarative Pipeline-ржПрж░ рж╕рзАржорж╛ржмржжрзНржзрждрж╛ (Limitations)**

|рж╕рзАржорж╛ржмржжрзНржзрждрж╛|ржмрзНржпрж╛ржЦрзНржпрж╛|
|---|---|
|**Less Flexible**|Scripted Pipeline-ржПрж░ ржорждрзЛ complex logic ржмрж╛ loop рж▓рзЗржЦрж╛ ржХржарж┐ржиред|
|**Limited Customization**|Dynamic step рждрзИрж░рж┐ ржХрж░рж╛ ржмрж╛ condition ржЕржирзБржпрж╛рзЯрзА stage skip ржХрж░рж╛ рж╕рзАржорж┐рждржнрж╛ржмрзЗ рж╕ржорзНржнржмред|
|**Learning YAML-like Syntax**|ржирждрзБржиржжрзЗрж░ ржЬржирзНржп syntax structure ржкрзНрж░ржержорзЗ unfamiliar рж╣рждрзЗ ржкрж╛рж░рзЗред|

---

### **Declarative vs Scripted Pipeline (рждрзБрж▓ржирж╛ржорзВрж▓ржХ ржЪрж╛рж░рзНржЯ)**

|ржмрж┐рж╖рзЯ|**Declarative Pipeline**|**Scripted Pipeline**|
|---|---|---|
|**Syntax**|Structured & readable|Free-form Groovy scripting|
|**Learning Curve**|рж╕рж╣ржЬ|ржЬржЯрж┐рж▓|
|**Flexibility**|рж╕рзАржорж┐ржд|ржЕрждрзНржпржирзНржд flexible|
|**Error Handling**|Built-in|Manual (try-catch)|
|**Usage**|Modern & preferred|Legacy & advanced scenarios|

---

### **рж╕ржВржХрзНрж╖рзЗржкрзЗ ржмрж▓рж╛ ржпрж╛рзЯ**

> **Declarative Pipeline** рж╣рж▓рзЛ Jenkins-ржПрж░ ржЖржзрзБржирж┐ржХ ржУ рж╕рж╣ржЬ pipeline format,  
> ржпрж╛ developer ржУ DevOps ржЯрж┐ржоржХрзЗ ржХрзЛржб build, test, ржПржмржВ deploy ржХрж░рж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ standard ржУ maintainable structure ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред

ржПржЯрж┐ рж╕рж╣ржЬрзЗ ржкрзЬрж╛, ржмрзЛржЭрж╛ ржУ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ тАФ  
рждрж╛ржЗ ржЖржзрзБржирж┐ржХ DevOps ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ **Declarative Pipeline**-ржЗ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржмрзНржпржмрж╣рзГрждред